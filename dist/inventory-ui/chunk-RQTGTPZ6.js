import{a as Z}from"./chunk-63UYU4OI.js";import{b as q,c as L,d as U,e as z,f as j,g as G,h as K,i as Q,j as R,k as H,l as J,m as X,n as Y}from"./chunk-CPZLEGUN.js";import{Aa as D,Ea as v,Hb as N,Ib as T,Jb as W,Kb as A,Lb as F,Mb as B,Pa as _,Qa as e,Ra as t,Sa as g,Va as E,Wa as m,X as u,Y as c,Ya as f,a as I,ab as P,bb as x,cb as M,db as i,eb as h,fb as w,hb as b,ib as S,jb as O,lb as y,mb as C,nb as V,qa as o,ua as k}from"./chunk-QSD6NO5L.js";function ee(p,n){if(p&1){let a=E();e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),y(7,"date"),t(),e(8,"td"),i(9),y(10,"date"),t(),e(11,"td"),i(12),y(13,"currency"),t(),e(14,"td")(15,"span",59),i(16),t()(),e(17,"td"),i(18),t(),e(19,"td")(20,"div",60)(21,"button",61),m("click",function(){let s=u(a).$implicit,l=f();return c(l.editOrder(s))}),g(22,"i",62),t(),e(23,"button",63),m("click",function(){let s=u(a).$implicit,l=f();return c(l.viewOrder(s))}),g(24,"i",64),t(),e(25,"button",65),m("click",function(){let s=u(a).$implicit,l=f();return c(l.updateStatus(s))}),g(26,"i",66),t(),e(27,"button",67),m("click",function(){let s=u(a).$implicit,l=f();return c(l.deleteOrder(s))}),g(28,"i",68),t()()()()}if(p&2){let a=n.$implicit,r=f();o(2),h(a.orderNumber),o(2),h(a.supplierName),o(2),h(V(7,8,a.orderDate,"shortDate")),o(3),h(V(10,11,a.expectedDeliveryDate,"shortDate")),o(3),h(C(13,14,a.totalAmount)),o(3),_("ngClass",r.getStatusClass(a.status)),o(),w(" ",a.status," "),o(2),w("",(a.items==null?null:a.items.length)||0," items")}}function te(p,n){if(p&1){let a=E();e(0,"tr")(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),y(9,"currency"),t(),e(10,"td"),i(11),y(12,"currency"),t(),e(13,"td")(14,"button",69),m("click",function(){let s=u(a).index,l=f();return c(l.removeItem(s))}),g(15,"i",68),t()()()}if(p&2){let a=n.$implicit;o(2),h(a.productName),o(2),h(a.sku),o(2),h(a.quantity),o(2),h(C(9,5,a.unitPrice)),o(3),h(C(12,7,a.totalPrice))}}function re(p,n){p&1&&g(0,"span",70)}function ie(p,n){p&1&&g(0,"span",70)}function ne(p,n){p&1&&g(0,"div",71)}var $=class p{constructor(n){this.purchaseOrdersService=n}purchaseOrders=[];currentOrder=this.getEmptyOrder();selectedOrder=null;showModal=!1;showStatusModal=!1;isEditing=!1;saving=!1;updatingStatus=!1;newStatus="";ngOnInit(){this.loadPurchaseOrders()}loadPurchaseOrders(){this.purchaseOrdersService.getPurchaseOrders().subscribe({next:n=>{this.purchaseOrders=n},error:n=>{console.error("Error loading purchase orders:",n)}})}showAddForm(){this.isEditing=!1,this.currentOrder=this.getEmptyOrder(),this.showModal=!0}editOrder(n){this.isEditing=!0,this.currentOrder=I({},n),this.showModal=!0}viewOrder(n){console.log("View order:",n)}updateStatus(n){this.selectedOrder=n,this.newStatus=n.status,this.showStatusModal=!0}deleteOrder(n){confirm(`Are you sure you want to delete purchase order "${n.orderNumber}"?`)&&this.purchaseOrdersService.deletePurchaseOrder(n.id).subscribe({next:()=>{this.purchaseOrders=this.purchaseOrders.filter(a=>a.id!==n.id)},error:a=>{console.error("Error deleting purchase order:",a)}})}addItem(){this.currentOrder.items||(this.currentOrder.items=[]);let n={purchaseOrderId:this.currentOrder.id||0,productId:0,quantity:1,unitPrice:0,totalPrice:0,productName:"",sku:""};this.currentOrder.items.push(n)}removeItem(n){this.currentOrder.items&&this.currentOrder.items.splice(n,1)}saveOrder(){this.saving=!0,this.isEditing?this.purchaseOrdersService.updatePurchaseOrder(this.currentOrder.id,this.currentOrder).subscribe({next:n=>{let a=this.purchaseOrders.findIndex(r=>r.id===n.id);a!==-1&&(this.purchaseOrders[a]=n),this.closeModal()},error:n=>{console.error("Error updating purchase order:",n),this.saving=!1},complete:()=>{this.saving=!1}}):this.purchaseOrdersService.createPurchaseOrder(this.currentOrder).subscribe({next:n=>{this.purchaseOrders.push(n),this.closeModal()},error:n=>{console.error("Error creating purchase order:",n),this.saving=!1},complete:()=>{this.saving=!1}})}saveStatus(){this.selectedOrder&&(this.updatingStatus=!0,this.purchaseOrdersService.updateStatus(this.selectedOrder.id,this.newStatus).subscribe({next:n=>{let a=this.purchaseOrders.findIndex(r=>r.id===n.id);a!==-1&&(this.purchaseOrders[a]=n),this.closeStatusModal()},error:n=>{console.error("Error updating status:",n),this.updatingStatus=!1},complete:()=>{this.updatingStatus=!1}}))}closeModal(){this.showModal=!1,this.saving=!1}closeStatusModal(){this.showStatusModal=!1,this.updatingStatus=!1,this.selectedOrder=null}getEmptyOrder(){return{orderNumber:"",supplierId:0,orderDate:new Date,expectedDeliveryDate:new Date,status:"Pending",totalAmount:0,notes:"",supplierName:"",items:[]}}getStatusClass(n){switch(n){case"Pending":return"bg-warning";case"Approved":return"bg-info";case"Shipped":return"bg-primary";case"Delivered":return"bg-success";case"Cancelled":return"bg-danger";default:return"bg-secondary"}}static \u0275fac=function(a){return new(a||p)(k(Z))};static \u0275cmp=D({type:p,selectors:[["app-purchase-orders"]],decls:158,vars:27,consts:[["purchaseOrderForm","ngForm"],["statusForm","ngForm"],[1,"container-fluid"],[1,"row","mb-4"],[1,"col"],[1,"col","text-end"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["id","purchaseOrderModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","orderNumber",1,"form-label"],["type","text","id","orderNumber","name","orderNumber","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","supplierId",1,"form-label"],["type","number","id","supplierId","name","supplierId","required","","min","1",1,"form-control",3,"ngModelChange","ngModel"],["for","orderDate",1,"form-label"],["type","date","id","orderDate","name","orderDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","expectedDeliveryDate",1,"form-label"],["type","date","id","expectedDeliveryDate","name","expectedDeliveryDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","status",1,"form-label"],["id","status","name","status","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","Pending"],["value","Approved"],["value","Shipped"],["value","Delivered"],["value","Cancelled"],["for","totalAmount",1,"form-label"],["type","number","id","totalAmount","name","totalAmount","required","","step","0.01","min","0",1,"form-control",3,"ngModelChange","ngModel"],["for","notes",1,"form-label"],["id","notes","name","notes","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"card","mt-3"],[1,"table","table-sm"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-plus-circle","me-1"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["id","statusModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],["for","newStatus",1,"form-label"],["id","newStatus","name","newStatus","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["class","modal-backdrop fade show",4,"ngIf"],[1,"badge",3,"ngClass"],["role","group",1,"btn-group"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-info",3,"click"],[1,"bi","bi-eye"],[1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"bi","bi-arrow-clockwise"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"modal-backdrop","fade","show"]],template:function(a,r){if(a&1){let s=E();e(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),i(4,"Purchase Orders Management"),t()(),e(5,"div",5)(6,"button",6),m("click",function(){return u(s),c(r.showAddForm())}),g(7,"i",7),i(8,"Create Purchase Order "),t()()(),e(9,"div",8)(10,"div",9)(11,"h5",10),i(12,"Purchase Orders List"),t()(),e(13,"div",11)(14,"div",12)(15,"table",13)(16,"thead")(17,"tr")(18,"th"),i(19,"Order #"),t(),e(20,"th"),i(21,"Supplier"),t(),e(22,"th"),i(23,"Order Date"),t(),e(24,"th"),i(25,"Expected Delivery"),t(),e(26,"th"),i(27,"Total Amount"),t(),e(28,"th"),i(29,"Status"),t(),e(30,"th"),i(31,"Items"),t(),e(32,"th"),i(33,"Actions"),t()()(),e(34,"tbody"),v(35,ee,29,16,"tr",14),t()()()()(),e(36,"div",15)(37,"div",16)(38,"div",17)(39,"div",18)(40,"h5",19),i(41),t(),e(42,"button",20),m("click",function(){return u(s),c(r.closeModal())}),t()(),e(43,"div",21)(44,"form",22,0),m("ngSubmit",function(){return u(s),c(r.saveOrder())}),e(46,"div",23)(47,"div",24)(48,"div",25)(49,"label",26),i(50,"Order Number *"),t(),e(51,"input",27),O("ngModelChange",function(d){return u(s),S(r.currentOrder.orderNumber,d)||(r.currentOrder.orderNumber=d),c(d)}),t()()(),e(52,"div",24)(53,"div",25)(54,"label",28),i(55,"Supplier ID *"),t(),e(56,"input",29),O("ngModelChange",function(d){return u(s),S(r.currentOrder.supplierId,d)||(r.currentOrder.supplierId=d),c(d)}),t()()()(),e(57,"div",23)(58,"div",24)(59,"div",25)(60,"label",30),i(61,"Order Date *"),t(),e(62,"input",31),O("ngModelChange",function(d){return u(s),S(r.currentOrder.orderDate,d)||(r.currentOrder.orderDate=d),c(d)}),t()()(),e(63,"div",24)(64,"div",25)(65,"label",32),i(66,"Expected Delivery Date *"),t(),e(67,"input",33),O("ngModelChange",function(d){return u(s),S(r.currentOrder.expectedDeliveryDate,d)||(r.currentOrder.expectedDeliveryDate=d),c(d)}),t()()()(),e(68,"div",23)(69,"div",24)(70,"div",25)(71,"label",34),i(72,"Status *"),t(),e(73,"select",35),O("ngModelChange",function(d){return u(s),S(r.currentOrder.status,d)||(r.currentOrder.status=d),c(d)}),e(74,"option",36),i(75,"Pending"),t(),e(76,"option",37),i(77,"Approved"),t(),e(78,"option",38),i(79,"Shipped"),t(),e(80,"option",39),i(81,"Delivered"),t(),e(82,"option",40),i(83,"Cancelled"),t()()()(),e(84,"div",24)(85,"div",25)(86,"label",41),i(87,"Total Amount *"),t(),e(88,"input",42),O("ngModelChange",function(d){return u(s),S(r.currentOrder.totalAmount,d)||(r.currentOrder.totalAmount=d),c(d)}),t()()()(),e(89,"div",25)(90,"label",43),i(91,"Notes"),t(),e(92,"textarea",44),O("ngModelChange",function(d){return u(s),S(r.currentOrder.notes,d)||(r.currentOrder.notes=d),c(d)}),t()(),e(93,"div",45)(94,"div",9)(95,"h6",10),i(96,"Order Items"),t()(),e(97,"div",11)(98,"div",12)(99,"table",46)(100,"thead")(101,"tr")(102,"th"),i(103,"Product"),t(),e(104,"th"),i(105,"SKU"),t(),e(106,"th"),i(107,"Quantity"),t(),e(108,"th"),i(109,"Unit Price"),t(),e(110,"th"),i(111,"Total Price"),t(),e(112,"th"),i(113,"Actions"),t()()(),e(114,"tbody"),v(115,te,16,9,"tr",14),t()()(),e(116,"button",47),m("click",function(){return u(s),c(r.addItem())}),g(117,"i",48),i(118,"Add Item "),t()()()()(),e(119,"div",49)(120,"button",50),m("click",function(){return u(s),c(r.closeModal())}),i(121,"Cancel"),t(),e(122,"button",51),m("click",function(){return u(s),c(r.saveOrder())}),v(123,re,1,0,"span",52),i(124),t()()()()(),e(125,"div",53)(126,"div",54)(127,"div",17)(128,"div",18)(129,"h5",19),i(130),t(),e(131,"button",20),m("click",function(){return u(s),c(r.closeStatusModal())}),t()(),e(132,"div",21)(133,"form",null,1)(135,"div",25)(136,"label",55),i(137,"New Status *"),t(),e(138,"select",56),O("ngModelChange",function(d){return u(s),S(r.newStatus,d)||(r.newStatus=d),c(d)}),e(139,"option",57),i(140,"Select Status"),t(),e(141,"option",36),i(142,"Pending"),t(),e(143,"option",37),i(144,"Approved"),t(),e(145,"option",38),i(146,"Shipped"),t(),e(147,"option",39),i(148,"Delivered"),t(),e(149,"option",40),i(150,"Cancelled"),t()()()()(),e(151,"div",49)(152,"button",50),m("click",function(){return u(s),c(r.closeStatusModal())}),i(153,"Cancel"),t(),e(154,"button",51),m("click",function(){return u(s),c(r.saveStatus())}),v(155,ie,1,0,"span",52),i(156),t()()()()(),v(157,ne,1,0,"div",58),t()}if(a&2){let s=P(45),l=P(134);o(35),_("ngForOf",r.purchaseOrders),o(),x("display",r.showModal?"block":"none"),M("show",r.showModal),o(5),h(r.isEditing?"Edit Purchase Order":"Create New Purchase Order"),o(10),b("ngModel",r.currentOrder.orderNumber),o(5),b("ngModel",r.currentOrder.supplierId),o(6),b("ngModel",r.currentOrder.orderDate),o(5),b("ngModel",r.currentOrder.expectedDeliveryDate),o(6),b("ngModel",r.currentOrder.status),o(15),b("ngModel",r.currentOrder.totalAmount),o(4),b("ngModel",r.currentOrder.notes),o(23),_("ngForOf",r.currentOrder.items),o(7),_("disabled",!s.valid||r.saving),o(),_("ngIf",r.saving),o(),w(" ",r.saving?"Saving...":"Save Order"," "),o(),x("display",r.showStatusModal?"block":"none"),M("show",r.showStatusModal),o(5),w("Update Status - ",r.selectedOrder==null?null:r.selectedOrder.orderNumber),o(8),b("ngModel",r.newStatus),o(16),_("disabled",!l.valid||r.updatingStatus),o(),_("ngIf",r.updatingStatus),o(),w(" ",r.updatingStatus?"Updating...":"Update Status"," "),o(),_("ngIf",r.showModal||r.showStatusModal)}},dependencies:[B,N,T,W,Y,G,R,H,q,K,Q,L,U,X,J,j,z,F,A],styles:[".modal-backdrop[_ngcontent-%COMP%]{z-index:1040}.modal[_ngcontent-%COMP%]{z-index:1050}"]})};export{$ as PurchaseOrdersComponent};
