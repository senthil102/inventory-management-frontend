import{a as G}from"./chunk-SFXOZ62E.js";import{b as Q,c as A,d as q,e as P,f as F,g as L,h as B,i as O,j as D,k as R,l as z,m as K,n as U}from"./chunk-CPZLEGUN.js";import{Aa as j,Ea as _,Hb as x,Ib as N,Jb as T,Mb as W,Pa as h,Qa as t,Ra as n,Sa as b,Va as S,Wa as c,X as m,Y as u,Ya as f,a as k,ab as M,bb as C,cb as E,db as i,eb as I,fb as w,hb as v,ib as p,jb as g,qa as a,ua as V}from"./chunk-QSD6NO5L.js";function J(y,r){if(y&1){let l=S();t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),n(),t(7,"td"),i(8),n(),t(9,"td"),i(10),n(),t(11,"td"),i(12),n(),t(13,"td"),i(14),n(),t(15,"td")(16,"span",59),i(17),n()(),t(18,"td")(19,"div",60)(20,"button",61),c("click",function(){let d=m(l).$implicit,s=f();return u(s.editInventory(d))}),b(21,"i",62),n(),t(22,"button",63),c("click",function(){let d=m(l).$implicit,s=f();return u(s.adjustStock(d))}),b(23,"i",64),n(),t(24,"button",65),c("click",function(){let d=m(l).$implicit,s=f();return u(s.deleteInventory(d))}),b(25,"i",66),n()()()()}if(y&2){let l=r.$implicit,e=f();a(2),I(l.id),a(2),I(l.productName),a(2),I(l.sku),a(2),I(l.warehouseName),a(2),I(l.quantity),a(2),I(l.reservedQuantity),a(2),I(l.availableQuantity),a(2),h("ngClass",e.getStockStatusClass(l)),a(),w(" ",e.getStockStatusText(l)," ")}}function X(y,r){y&1&&b(0,"span",67)}function Y(y,r){y&1&&b(0,"span",67)}function Z(y,r){y&1&&b(0,"div",68)}var H=class y{constructor(r){this.inventoryService=r}inventory=[];currentInventory=this.getEmptyInventory();selectedItem=null;showModal=!1;showAdjustmentModal=!1;isEditing=!1;saving=!1;adjusting=!1;adjustment={type:"add",quantity:0};ngOnInit(){this.loadInventory()}loadInventory(){this.inventoryService.getInventory().subscribe({next:r=>{this.inventory=r},error:r=>{console.error("Error loading inventory:",r)}})}showAddForm(){this.isEditing=!1,this.currentInventory=this.getEmptyInventory(),this.showModal=!0}editInventory(r){this.isEditing=!0,this.currentInventory=k({},r),this.showModal=!0}deleteInventory(r){confirm(`Are you sure you want to delete this inventory item for "${r.productName}"?`)&&this.inventoryService.deleteInventoryItem(r.id).subscribe({next:()=>{this.inventory=this.inventory.filter(l=>l.id!==r.id)},error:l=>{console.error("Error deleting inventory:",l)}})}adjustStock(r){this.selectedItem=r,this.adjustment={type:"add",quantity:0},this.showAdjustmentModal=!0}saveInventory(){this.saving=!0,this.currentInventory.availableQuantity=this.currentInventory.quantity-this.currentInventory.reservedQuantity,this.isEditing?this.inventoryService.updateInventoryItem(this.currentInventory.id,this.currentInventory).subscribe({next:r=>{let l=this.inventory.findIndex(e=>e.id===r.id);l!==-1&&(this.inventory[l]=r),this.closeModal()},error:r=>{console.error("Error updating inventory:",r),this.saving=!1},complete:()=>{this.saving=!1}}):this.inventoryService.createInventoryItem(this.currentInventory).subscribe({next:r=>{this.inventory.push(r),this.closeModal()},error:r=>{console.error("Error creating inventory:",r),this.saving=!1},complete:()=>{this.saving=!1}})}saveAdjustment(){this.selectedItem&&(this.adjusting=!0,this.inventoryService.adjustInventory(this.selectedItem.id,this.adjustment).subscribe({next:r=>{let l=this.inventory.findIndex(e=>e.id===r.id);l!==-1&&(this.inventory[l]=r),this.closeAdjustmentModal()},error:r=>{console.error("Error adjusting inventory:",r),this.adjusting=!1},complete:()=>{this.adjusting=!1}}))}closeModal(){this.showModal=!1,this.saving=!1}closeAdjustmentModal(){this.showAdjustmentModal=!1,this.adjusting=!1,this.selectedItem=null}getEmptyInventory(){return{productId:0,warehouseId:0,quantity:0,reservedQuantity:0,availableQuantity:0,productName:"",warehouseName:"",sku:""}}getStockStatusClass(r){return r.availableQuantity<=10?"bg-danger":r.availableQuantity<=25?"bg-warning":"bg-success"}getStockStatusText(r){return r.availableQuantity<=10?"Low Stock":r.availableQuantity<=25?"Medium Stock":"In Stock"}static \u0275fac=function(l){return new(l||y)(V(G))};static \u0275cmp=j({type:y,selectors:[["app-inventory"]],decls:131,vars:28,consts:[["inventoryForm","ngForm"],["adjustmentForm","ngForm"],[1,"container-fluid"],[1,"row","mb-4"],[1,"col"],[1,"col","text-end"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"card"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["id","inventoryModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","productId",1,"form-label"],["type","number","id","productId","name","productId","required","","min","1",1,"form-control",3,"ngModelChange","ngModel"],["for","warehouseId",1,"form-label"],["type","number","id","warehouseId","name","warehouseId","required","","min","1",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4"],["for","quantity",1,"form-label"],["type","number","id","quantity","name","quantity","required","","min","0",1,"form-control",3,"ngModelChange","ngModel"],["for","reservedQuantity",1,"form-label"],["type","number","id","reservedQuantity","name","reservedQuantity","required","","min","0",1,"form-control",3,"ngModelChange","ngModel"],["for","availableQuantity",1,"form-label"],["type","number","id","availableQuantity","name","availableQuantity","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["for","productName",1,"form-label"],["type","text","id","productName","name","productName",1,"form-control",3,"ngModelChange","ngModel"],["for","warehouseName",1,"form-label"],["type","text","id","warehouseName","name","warehouseName",1,"form-control",3,"ngModelChange","ngModel"],["for","sku",1,"form-label"],["type","text","id","sku","name","sku",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["id","adjustmentModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],["for","adjustmentType",1,"form-label"],["id","adjustmentType","name","adjustmentType","required","",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","add"],["value","subtract"],["value","reserve"],["value","release"],["for","adjustmentQuantity",1,"form-label"],["type","number","id","adjustmentQuantity","name","adjustmentQuantity","required","","min","1",1,"form-control",3,"ngModelChange","ngModel"],["class","modal-backdrop fade show",4,"ngIf"],[1,"badge",3,"ngClass"],["role","group",1,"btn-group"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-warning",3,"click"],[1,"bi","bi-arrow-up-down"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"modal-backdrop","fade","show"]],template:function(l,e){if(l&1){let d=S();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),i(4,"Inventory Management"),n()(),t(5,"div",5)(6,"button",6),c("click",function(){return m(d),u(e.showAddForm())}),b(7,"i",7),i(8,"Add Inventory Item "),n()()(),t(9,"div",8)(10,"div",9)(11,"h5",10),i(12,"Inventory List"),n()(),t(13,"div",11)(14,"div",12)(15,"table",13)(16,"thead")(17,"tr")(18,"th"),i(19,"ID"),n(),t(20,"th"),i(21,"Product"),n(),t(22,"th"),i(23,"SKU"),n(),t(24,"th"),i(25,"Warehouse"),n(),t(26,"th"),i(27,"Total Quantity"),n(),t(28,"th"),i(29,"Reserved"),n(),t(30,"th"),i(31,"Available"),n(),t(32,"th"),i(33,"Status"),n(),t(34,"th"),i(35,"Actions"),n()()(),t(36,"tbody"),_(37,J,26,9,"tr",14),n()()()()(),t(38,"div",15)(39,"div",16)(40,"div",17)(41,"div",18)(42,"h5",19),i(43),n(),t(44,"button",20),c("click",function(){return m(d),u(e.closeModal())}),n()(),t(45,"div",21)(46,"form",22,0),c("ngSubmit",function(){return m(d),u(e.saveInventory())}),t(48,"div",23)(49,"div",24)(50,"div",25)(51,"label",26),i(52,"Product ID *"),n(),t(53,"input",27),g("ngModelChange",function(o){return m(d),p(e.currentInventory.productId,o)||(e.currentInventory.productId=o),u(o)}),n()()(),t(54,"div",24)(55,"div",25)(56,"label",28),i(57,"Warehouse ID *"),n(),t(58,"input",29),g("ngModelChange",function(o){return m(d),p(e.currentInventory.warehouseId,o)||(e.currentInventory.warehouseId=o),u(o)}),n()()()(),t(59,"div",23)(60,"div",30)(61,"div",25)(62,"label",31),i(63,"Total Quantity *"),n(),t(64,"input",32),g("ngModelChange",function(o){return m(d),p(e.currentInventory.quantity,o)||(e.currentInventory.quantity=o),u(o)}),n()()(),t(65,"div",30)(66,"div",25)(67,"label",33),i(68,"Reserved Quantity *"),n(),t(69,"input",34),g("ngModelChange",function(o){return m(d),p(e.currentInventory.reservedQuantity,o)||(e.currentInventory.reservedQuantity=o),u(o)}),n()()(),t(70,"div",30)(71,"div",25)(72,"label",35),i(73,"Available Quantity"),n(),t(74,"input",36),g("ngModelChange",function(o){return m(d),p(e.currentInventory.availableQuantity,o)||(e.currentInventory.availableQuantity=o),u(o)}),n()()()(),t(75,"div",23)(76,"div",24)(77,"div",25)(78,"label",37),i(79,"Product Name"),n(),t(80,"input",38),g("ngModelChange",function(o){return m(d),p(e.currentInventory.productName,o)||(e.currentInventory.productName=o),u(o)}),n()()(),t(81,"div",24)(82,"div",25)(83,"label",39),i(84,"Warehouse Name"),n(),t(85,"input",40),g("ngModelChange",function(o){return m(d),p(e.currentInventory.warehouseName,o)||(e.currentInventory.warehouseName=o),u(o)}),n()()()(),t(86,"div",25)(87,"label",41),i(88,"SKU"),n(),t(89,"input",42),g("ngModelChange",function(o){return m(d),p(e.currentInventory.sku,o)||(e.currentInventory.sku=o),u(o)}),n()()()(),t(90,"div",43)(91,"button",44),c("click",function(){return m(d),u(e.closeModal())}),i(92,"Cancel"),n(),t(93,"button",45),c("click",function(){return m(d),u(e.saveInventory())}),_(94,X,1,0,"span",46),i(95),n()()()()(),t(96,"div",47)(97,"div",48)(98,"div",17)(99,"div",18)(100,"h5",19),i(101),n(),t(102,"button",20),c("click",function(){return m(d),u(e.closeAdjustmentModal())}),n()(),t(103,"div",21)(104,"form",null,1)(106,"div",25)(107,"label",49),i(108,"Adjustment Type *"),n(),t(109,"select",50),g("ngModelChange",function(o){return m(d),p(e.adjustment.type,o)||(e.adjustment.type=o),u(o)}),t(110,"option",51),i(111,"Select Type"),n(),t(112,"option",52),i(113,"Add Stock"),n(),t(114,"option",53),i(115,"Subtract Stock"),n(),t(116,"option",54),i(117,"Reserve Stock"),n(),t(118,"option",55),i(119,"Release Reserved Stock"),n()()(),t(120,"div",25)(121,"label",56),i(122,"Quantity *"),n(),t(123,"input",57),g("ngModelChange",function(o){return m(d),p(e.adjustment.quantity,o)||(e.adjustment.quantity=o),u(o)}),n()()()(),t(124,"div",43)(125,"button",44),c("click",function(){return m(d),u(e.closeAdjustmentModal())}),i(126,"Cancel"),n(),t(127,"button",45),c("click",function(){return m(d),u(e.saveAdjustment())}),_(128,Y,1,0,"span",46),i(129),n()()()()(),_(130,Z,1,0,"div",58),n()}if(l&2){let d=M(47),s=M(105);a(37),h("ngForOf",e.inventory),a(),C("display",e.showModal?"block":"none"),E("show",e.showModal),a(5),I(e.isEditing?"Edit Inventory Item":"Add New Inventory Item"),a(10),v("ngModel",e.currentInventory.productId),a(5),v("ngModel",e.currentInventory.warehouseId),a(6),v("ngModel",e.currentInventory.quantity),a(5),v("ngModel",e.currentInventory.reservedQuantity),a(5),v("ngModel",e.currentInventory.availableQuantity),a(6),v("ngModel",e.currentInventory.productName),a(5),v("ngModel",e.currentInventory.warehouseName),a(4),v("ngModel",e.currentInventory.sku),a(4),h("disabled",!d.valid||e.saving),a(),h("ngIf",e.saving),a(),w(" ",e.saving?"Saving...":"Save Inventory"," "),a(),C("display",e.showAdjustmentModal?"block":"none"),E("show",e.showAdjustmentModal),a(5),w("Adjust Stock - ",e.selectedItem==null?null:e.selectedItem.productName),a(8),v("ngModel",e.adjustment.type),a(14),v("ngModel",e.adjustment.quantity),a(4),h("disabled",!s.valid||e.adjusting),a(),h("ngIf",e.adjusting),a(),w(" ",e.adjusting?"Adjusting...":"Adjust Stock"," "),a(),h("ngIf",e.showModal||e.showAdjustmentModal)}},dependencies:[W,x,N,T,U,L,D,R,Q,B,O,A,q,K,z,F,P],styles:[".modal-backdrop[_ngcontent-%COMP%]{z-index:1040}.modal[_ngcontent-%COMP%]{z-index:1050}"]})};export{H as InventoryComponent};
